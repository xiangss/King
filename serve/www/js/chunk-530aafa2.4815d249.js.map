{"version":3,"sources":["webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/popup/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/uploader/utils.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/image-preview/ImagePreview.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/image-preview/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/uploader/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/uploader/style/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/popup/context.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/portal.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/close-on-popstate.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/overlay/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/popup/overlay.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/popup/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/swipe-item/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/utils/dom/scroll.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/popup/style/index.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/utils/dom/raf.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/mixins/bind-event.js","webpack:///D:/桌面/作业和考试/King/node_modules/_vant@2.2.13@vant/es/swipe/index.js"],"names":["_createNamespace","createComponent","bem","mixins","props","round","Boolean","duration","Number","closeable","transition","String","safeAreaInsetBottom","closeIcon","type","default","closeIconPosition","position","overlay","closeOnClickOverlay","beforeCreate","_this","this","createEmitter","eventName","event","$emit","onClick","onOpened","onClosed","render","_bem","h","arguments","shouldRender","transitionName","style","transitionDuration","name","value","slots","close","toArray","item","Array","isArray","file","resultType","Promise","resolve","reader","FileReader","onload","target","result","readAsDataURL","readAsText","isOversize","files","maxSize","some","size","IMAGE_REGEXP","isImageUrl","url","test","isImageFile","isImage","indexOf","content","create","getDistance","touches","Math","sqrt","pow","clientX","clientY","instance","className","lazyLoad","asyncClose","showIndicators","images","loop","swipeDuration","showIndex","startPosition","minZoom","maxZoom","overlayClass","data","scale","moveX","moveY","active","moving","zooming","doubleClickTimer","computed","imageStyle","transform","watch","setActive","methods","onWrapperTouchStart","touchStartTime","Date","onWrapperTouchEnd","deltaTime","_ref","$refs","swipe","_ref$offsetX","offsetX","_ref$offsetY","offsetY","clearTimeout","toggleScale","setTimeout","index","startMove","image","currentTarget","rect","getBoundingClientRect","winWidth","window","innerWidth","winHeight","innerHeight","touchStart","startMoveX","startMoveY","maxMoveX","max","width","maxMoveY","height","startZoom","startScale","startDistance","onImageTouchStart","_ref2","_ref2$offsetX","length","onImageTouchMove","touchMove","deltaX","deltaY","distance","onImageTouchEnd","stopPropagation","resetScale","genIndex","$createElement","genCover","cover","genImages","_this2","imageSlots","loading","map","defaultConfig","onClose","onChange","closeOnPopstate","extend","el","document","createElement","body","appendChild","$el","$on","options","$once","show","install","use","inheritAttrs","model","prop","disabled","uploadText","afterRead","Function","beforeRead","beforeDelete","previewSize","accept","fileList","MAX_VALUE","maxCount","deletable","previewImage","previewFullImage","imageFit","previewSizeWithUnit","getDetail","slice","call","response","resetInput","then","readFile","catch","oversize","all","contents","onAfterRead","concat","onDelete","_this3","deleteFile","splice","input","onPreviewImage","_this4","imageFiles","filter","imageContents","imagePreview","closeImagePreview","genPreviewItem","_this5","DeleteIcon","Preview","genPreviewList","genUpload","slot","Input","$attrs","context","zIndex","lockCount","stack","getElement","selector","querySelector","PortalMixin","ref","afterPortal","getContainer","mounted","portal","container","$parent","parentNode","CloseOnPopstateMixin","bind","isBind","handlePopstate","bindStatus","val","$isServer","action","preventTouchMove","Overlay","ctx","customStyle","animationDuration","Object","onClickOverlay","top","vm","updateOverlay","on","click","_context$top","config","insertBefore","openOverlay","push","closeOverlay","pop","PopupMixin","overlayStyle","lockScroll","lazyRender","inited","open","activated","beforeDestroy","deactivated","opened","undefined","renderOverlay","onTouchMove","classList","add","remove","direction","scrollHeight","offsetHeight","scrollTop","status","parseInt","$nextTick","updateZIndex","offset","swipes","destroyed","_this$$parent","vertical","computedWidth","computedHeight","$listeners","overflowScrollReg","getScrollEventTarget","element","rootParent","node","tagName","nodeType","_window$getComputedSt","getComputedStyle","overflowY","_window$getComputedSt2","htmlOverflowY","getScrollTop","pageYOffset","setScrollTop","scrollTo","scrollX","getRootScrollTop","documentElement","setRootScrollTop","getElementTop","prev","now","fallback","fn","curr","ms","id","root","global","iRaf","requestAnimationFrame","iCancel","cancelAnimationFrame","raf","doubleRaf","cancelRaf","BindEventMixin","handler","binded","unbind","onResize","initialize","clear","autoplay","indicatorColor","touchable","initialSwipe","swiping","_autoplay","autoPlay","count","delta","trackSize","activeIndicator","isCorrectDirection","expect","trackStyle","mainAxis","crossAxis","indicatorStyle","backgroundColor","minOffset","timer","forEach","onTouchStart","correctPosition","move","onTouchEnd","pace","emitChange","getTargetActive","getTargetOffset","targetActive","currentPosition","min","targetOffset","_ref2$pace","_ref2$offset","outRightBound","outLeftBound","swipeTo","resetTouchStatus","targetIndex","immediate","genIndicator","apply","empty"],"mappings":"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","file":"js/chunk-530aafa2.4815d249.js","sourcesContent":["import { createNamespace, isDef } from '../utils';\nimport { PopupMixin } from '../mixins/popup';\nimport Icon from '../icon';\n\nvar _createNamespace = createNamespace('popup'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [PopupMixin],\n  props: {\n    round: Boolean,\n    duration: Number,\n    closeable: Boolean,\n    transition: String,\n    safeAreaInsetBottom: Boolean,\n    closeIcon: {\n      type: String,\n      default: 'cross'\n    },\n    closeIconPosition: {\n      type: String,\n      default: 'top-right'\n    },\n    position: {\n      type: String,\n      default: 'center'\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: true\n    }\n  },\n  beforeCreate: function beforeCreate() {\n    var _this = this;\n\n    var createEmitter = function createEmitter(eventName) {\n      return function (event) {\n        return _this.$emit(eventName, event);\n      };\n    };\n\n    this.onClick = createEmitter('click');\n    this.onOpened = createEmitter('opened');\n    this.onClosed = createEmitter('closed');\n  },\n  render: function render() {\n    var _bem;\n\n    var h = arguments[0];\n\n    if (!this.shouldRender) {\n      return;\n    }\n\n    var round = this.round,\n        position = this.position,\n        duration = this.duration;\n    var transitionName = this.transition || (position === 'center' ? 'van-fade' : \"van-popup-slide-\" + position);\n    var style = {};\n\n    if (isDef(duration)) {\n      style.transitionDuration = duration + \"s\";\n    }\n\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": transitionName\n      },\n      \"on\": {\n        \"afterEnter\": this.onOpened,\n        \"afterLeave\": this.onClosed\n      }\n    }, [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.value\n      }],\n      \"style\": style,\n      \"class\": bem((_bem = {\n        round: round\n      }, _bem[position] = position, _bem['safe-area-inset-bottom'] = this.safeAreaInsetBottom, _bem)),\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [this.slots(), this.closeable && h(Icon, {\n      \"attrs\": {\n        \"role\": \"button\",\n        \"tabindex\": \"0\",\n        \"name\": this.closeIcon\n      },\n      \"class\": bem('close-icon', this.closeIconPosition),\n      \"on\": {\n        \"click\": this.close\n      }\n    })])]);\n  }\n});","export function toArray(item) {\n  if (Array.isArray(item)) {\n    return item;\n  }\n\n  return [item];\n}\nexport function readFile(file, resultType) {\n  return new Promise(function (resolve) {\n    if (resultType === 'file') {\n      resolve();\n      return;\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function (event) {\n      resolve(event.target.result);\n    };\n\n    if (resultType === 'dataUrl') {\n      reader.readAsDataURL(file);\n    } else if (resultType === 'text') {\n      reader.readAsText(file);\n    }\n  });\n}\nexport function isOversize(files, maxSize) {\n  return toArray(files).some(function (file) {\n    return file.size > maxSize;\n  });\n}\nvar IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\nexport function isImageUrl(url) {\n  return IMAGE_REGEXP.test(url);\n}\nexport function isImageFile(item) {\n  // some special urls cannot be recognized\n  // user can add `isImage` flag to mark it as an image url\n  if (item.isImage) {\n    return true;\n  }\n\n  if (item.file && item.file.type) {\n    return item.file.type.indexOf('image') === 0;\n  }\n\n  if (item.url) {\n    return isImageUrl(item.url);\n  }\n\n  if (item.content) {\n    return item.content.indexOf('data:image') === 0;\n  }\n\n  return false;\n}","import { createNamespace } from '../utils';\nimport { range } from '../utils/format/number';\nimport { preventDefault } from '../utils/dom/event';\nimport { PopupMixin } from '../mixins/popup';\nimport { TouchMixin } from '../mixins/touch';\nimport Image from '../image';\nimport Loading from '../loading';\nimport Swipe from '../swipe';\nimport SwipeItem from '../swipe-item';\n\nvar _createNamespace = createNamespace('image-preview'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction getDistance(touches) {\n  return Math.sqrt(Math.pow(touches[0].clientX - touches[1].clientX, 2) + Math.pow(touches[0].clientY - touches[1].clientY, 2));\n}\n\nexport default createComponent({\n  mixins: [PopupMixin, TouchMixin],\n  props: {\n    className: null,\n    lazyLoad: Boolean,\n    asyncClose: Boolean,\n    showIndicators: Boolean,\n    images: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    loop: {\n      type: Boolean,\n      default: true\n    },\n    swipeDuration: {\n      type: Number,\n      default: 500\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    showIndex: {\n      type: Boolean,\n      default: true\n    },\n    startPosition: {\n      type: Number,\n      default: 0\n    },\n    minZoom: {\n      type: Number,\n      default: 1 / 3\n    },\n    maxZoom: {\n      type: Number,\n      default: 3\n    },\n    overlayClass: {\n      type: String,\n      default: bem('overlay')\n    }\n  },\n  data: function data() {\n    return {\n      scale: 1,\n      moveX: 0,\n      moveY: 0,\n      active: 0,\n      moving: false,\n      zooming: false,\n      doubleClickTimer: null\n    };\n  },\n  computed: {\n    imageStyle: function imageStyle() {\n      var scale = this.scale;\n      var style = {\n        transitionDuration: this.zooming || this.moving ? '0s' : '.3s'\n      };\n\n      if (scale !== 1) {\n        style.transform = \"scale3d(\" + scale + \", \" + scale + \", 1) translate(\" + this.moveX / scale + \"px, \" + this.moveY / scale + \"px)\";\n      }\n\n      return style;\n    }\n  },\n  watch: {\n    value: function value() {\n      this.setActive(this.startPosition);\n    },\n    startPosition: function startPosition(active) {\n      this.setActive(active);\n    }\n  },\n  methods: {\n    onWrapperTouchStart: function onWrapperTouchStart() {\n      this.touchStartTime = new Date();\n    },\n    onWrapperTouchEnd: function onWrapperTouchEnd(event) {\n      var _this = this;\n\n      preventDefault(event);\n      var deltaTime = new Date() - this.touchStartTime;\n\n      var _ref = this.$refs.swipe || {},\n          _ref$offsetX = _ref.offsetX,\n          offsetX = _ref$offsetX === void 0 ? 0 : _ref$offsetX,\n          _ref$offsetY = _ref.offsetY,\n          offsetY = _ref$offsetY === void 0 ? 0 : _ref$offsetY; // prevent long tap to close component\n\n\n      if (deltaTime < 300 && offsetX < 10 && offsetY < 10) {\n        if (!this.doubleClickTimer) {\n          this.doubleClickTimer = setTimeout(function () {\n            var index = _this.active;\n\n            _this.$emit('close', {\n              index: index,\n              url: _this.images[index]\n            });\n\n            if (!_this.asyncClose) {\n              _this.$emit('input', false);\n            }\n\n            _this.doubleClickTimer = null;\n          }, 300);\n        } else {\n          clearTimeout(this.doubleClickTimer);\n          this.doubleClickTimer = null;\n          this.toggleScale();\n        }\n      }\n    },\n    startMove: function startMove(event) {\n      var image = event.currentTarget;\n      var rect = image.getBoundingClientRect();\n      var winWidth = window.innerWidth;\n      var winHeight = window.innerHeight;\n      this.touchStart(event);\n      this.moving = true;\n      this.startMoveX = this.moveX;\n      this.startMoveY = this.moveY;\n      this.maxMoveX = Math.max(0, (rect.width - winWidth) / 2);\n      this.maxMoveY = Math.max(0, (rect.height - winHeight) / 2);\n    },\n    startZoom: function startZoom(event) {\n      this.moving = false;\n      this.zooming = true;\n      this.startScale = this.scale;\n      this.startDistance = getDistance(event.touches);\n    },\n    onImageTouchStart: function onImageTouchStart(event) {\n      var touches = event.touches;\n\n      var _ref2 = this.$refs.swipe || {},\n          _ref2$offsetX = _ref2.offsetX,\n          offsetX = _ref2$offsetX === void 0 ? 0 : _ref2$offsetX;\n\n      if (touches.length === 1 && this.scale !== 1) {\n        this.startMove(event);\n      }\n      /* istanbul ignore else */\n      else if (touches.length === 2 && !offsetX) {\n          this.startZoom(event);\n        }\n    },\n    onImageTouchMove: function onImageTouchMove(event) {\n      var touches = event.touches;\n\n      if (this.moving || this.zooming) {\n        preventDefault(event, true);\n      }\n\n      if (this.moving) {\n        this.touchMove(event);\n        var moveX = this.deltaX + this.startMoveX;\n        var moveY = this.deltaY + this.startMoveY;\n        this.moveX = range(moveX, -this.maxMoveX, this.maxMoveX);\n        this.moveY = range(moveY, -this.maxMoveY, this.maxMoveY);\n      }\n\n      if (this.zooming && touches.length === 2) {\n        var distance = getDistance(touches);\n        var scale = this.startScale * distance / this.startDistance;\n        this.scale = range(scale, this.minZoom, this.maxZoom);\n      }\n    },\n    onImageTouchEnd: function onImageTouchEnd(event) {\n      /* istanbul ignore else */\n      if (this.moving || this.zooming) {\n        var stopPropagation = true;\n\n        if (this.moving && this.startMoveX === this.moveX && this.startMoveY === this.moveY) {\n          stopPropagation = false;\n        }\n\n        if (!event.touches.length) {\n          this.moving = false;\n          this.zooming = false;\n          this.startMoveX = 0;\n          this.startMoveY = 0;\n          this.startScale = 1;\n\n          if (this.scale < 1) {\n            this.resetScale();\n          }\n        }\n\n        if (stopPropagation) {\n          preventDefault(event, true);\n        }\n      }\n    },\n    setActive: function setActive(active) {\n      this.resetScale();\n\n      if (active !== this.active) {\n        this.active = active;\n        this.$emit('change', active);\n      }\n    },\n    resetScale: function resetScale() {\n      this.scale = 1;\n      this.moveX = 0;\n      this.moveY = 0;\n    },\n    toggleScale: function toggleScale() {\n      var scale = this.scale > 1 ? 1 : 2;\n      this.scale = scale;\n      this.moveX = 0;\n      this.moveY = 0;\n    },\n    genIndex: function genIndex() {\n      var h = this.$createElement;\n\n      if (this.showIndex) {\n        return h(\"div\", {\n          \"class\": bem('index')\n        }, [this.slots('index') || this.active + 1 + \" / \" + this.images.length]);\n      }\n    },\n    genCover: function genCover() {\n      var h = this.$createElement;\n      var cover = this.slots('cover');\n\n      if (cover) {\n        return h(\"div\", {\n          \"class\": bem('cover')\n        }, [cover]);\n      }\n    },\n    genImages: function genImages() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var imageSlots = {\n        loading: function loading() {\n          return h(Loading, {\n            \"attrs\": {\n              \"type\": \"spinner\"\n            }\n          });\n        }\n      };\n      return h(Swipe, {\n        \"ref\": \"swipe\",\n        \"attrs\": {\n          \"loop\": this.loop,\n          \"indicatorColor\": \"white\",\n          \"duration\": this.swipeDuration,\n          \"initialSwipe\": this.startPosition,\n          \"showIndicators\": this.showIndicators\n        },\n        \"class\": bem('swipe'),\n        \"on\": {\n          \"change\": this.setActive\n        },\n        \"nativeOn\": {\n          \"touchstart\": this.onWrapperTouchStart,\n          \"touchMove\": preventDefault,\n          \"touchend\": this.onWrapperTouchEnd,\n          \"touchcancel\": this.onWrapperTouchEnd\n        }\n      }, [this.images.map(function (image, index) {\n        return h(SwipeItem, [h(Image, {\n          \"attrs\": {\n            \"src\": image,\n            \"fit\": \"contain\",\n            \"lazyLoad\": _this2.lazyLoad\n          },\n          \"class\": bem('image'),\n          \"scopedSlots\": imageSlots,\n          \"style\": index === _this2.active ? _this2.imageStyle : null,\n          \"nativeOn\": {\n            \"touchstart\": _this2.onImageTouchStart,\n            \"touchmove\": _this2.onImageTouchMove,\n            \"touchend\": _this2.onImageTouchEnd,\n            \"touchcancel\": _this2.onImageTouchEnd\n          }\n        })]);\n      })]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    if (!this.value) {\n      return;\n    }\n\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": \"van-fade\"\n      }\n    }, [h(\"div\", {\n      \"class\": [bem(), this.className]\n    }, [this.genImages(), this.genIndex(), this.genCover()])]);\n  }\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VueImagePreview from './ImagePreview';\nimport { isServer } from '../utils';\nvar instance;\nvar defaultConfig = {\n  loop: true,\n  images: [],\n  value: true,\n  minZoom: 1 / 3,\n  maxZoom: 3,\n  className: '',\n  onClose: null,\n  onChange: null,\n  lazyLoad: false,\n  showIndex: true,\n  asyncClose: false,\n  startPosition: 0,\n  swipeDuration: 500,\n  showIndicators: false,\n  closeOnPopstate: false\n};\n\nvar initInstance = function initInstance() {\n  instance = new (Vue.extend(VueImagePreview))({\n    el: document.createElement('div')\n  });\n  document.body.appendChild(instance.$el);\n  instance.$on('change', function (index) {\n    if (instance.onChange) {\n      instance.onChange(index);\n    }\n  });\n};\n\nvar ImagePreview = function ImagePreview(images, startPosition) {\n  if (startPosition === void 0) {\n    startPosition = 0;\n  }\n\n  /* istanbul ignore if */\n  if (isServer) {\n    return;\n  }\n\n  if (!instance) {\n    initInstance();\n  }\n\n  var options = Array.isArray(images) ? {\n    images: images,\n    startPosition: startPosition\n  } : images;\n\n  _extends(instance, defaultConfig, options);\n\n  instance.$once('input', function (show) {\n    instance.value = show;\n  });\n\n  if (options.onClose) {\n    instance.$once('close', options.onClose);\n  }\n\n  return instance;\n};\n\nImagePreview.install = function () {\n  Vue.use(VueImagePreview);\n};\n\nexport default ImagePreview;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createNamespace, addUnit, noop } from '../utils';\nimport { toArray, readFile as _readFile, isOversize, isImageFile } from './utils';\nimport Icon from '../icon';\nimport Image from '../image';\nimport ImagePreview from '../image-preview';\n\nvar _createNamespace = createNamespace('uploader'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  inheritAttrs: false,\n  model: {\n    prop: 'fileList'\n  },\n  props: {\n    disabled: Boolean,\n    uploadText: String,\n    afterRead: Function,\n    beforeRead: Function,\n    beforeDelete: Function,\n    previewSize: [Number, String],\n    name: {\n      type: [Number, String],\n      default: ''\n    },\n    accept: {\n      type: String,\n      default: 'image/*'\n    },\n    fileList: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    maxSize: {\n      type: Number,\n      default: Number.MAX_VALUE\n    },\n    maxCount: {\n      type: Number,\n      default: Number.MAX_VALUE\n    },\n    deletable: {\n      type: Boolean,\n      default: true\n    },\n    previewImage: {\n      type: Boolean,\n      default: true\n    },\n    previewFullImage: {\n      type: Boolean,\n      default: true\n    },\n    imageFit: {\n      type: String,\n      default: 'cover'\n    },\n    resultType: {\n      type: String,\n      default: 'dataUrl'\n    }\n  },\n  computed: {\n    previewSizeWithUnit: function previewSizeWithUnit() {\n      return addUnit(this.previewSize);\n    }\n  },\n  methods: {\n    getDetail: function getDetail(index) {\n      if (index === void 0) {\n        index = this.fileList.length;\n      }\n\n      return {\n        name: this.name,\n        index: index\n      };\n    },\n    onChange: function onChange(event) {\n      var _this = this;\n\n      var files = event.target.files;\n\n      if (this.disabled || !files.length) {\n        return;\n      }\n\n      files = files.length === 1 ? files[0] : [].slice.call(files);\n\n      if (this.beforeRead) {\n        var response = this.beforeRead(files, this.getDetail());\n\n        if (!response) {\n          this.resetInput();\n          return;\n        }\n\n        if (response.then) {\n          response.then(function () {\n            _this.readFile(files);\n          }).catch(this.resetInput);\n          return;\n        }\n      }\n\n      this.readFile(files);\n    },\n    readFile: function readFile(files) {\n      var _this2 = this;\n\n      var oversize = isOversize(files, this.maxSize);\n\n      if (Array.isArray(files)) {\n        var maxCount = this.maxCount - this.fileList.length;\n\n        if (files.length > maxCount) {\n          files = files.slice(0, maxCount);\n        }\n\n        Promise.all(files.map(function (file) {\n          return _readFile(file, _this2.resultType);\n        })).then(function (contents) {\n          var fileList = files.map(function (file, index) {\n            var result = {\n              file: file\n            };\n\n            if (contents[index]) {\n              result.content = contents[index];\n            }\n\n            return result;\n          });\n\n          _this2.onAfterRead(fileList, oversize);\n        });\n      } else {\n        _readFile(files, this.resultType).then(function (content) {\n          var result = {\n            file: files\n          };\n\n          if (content) {\n            result.content = content;\n          }\n\n          _this2.onAfterRead(result, oversize);\n        });\n      }\n    },\n    onAfterRead: function onAfterRead(files, oversize) {\n      if (oversize) {\n        this.$emit('oversize', files, this.getDetail());\n        return;\n      }\n\n      this.resetInput();\n      this.$emit('input', [].concat(this.fileList, toArray(files)));\n\n      if (this.afterRead) {\n        this.afterRead(files, this.getDetail());\n      }\n    },\n    onDelete: function onDelete(file, index) {\n      var _this3 = this;\n\n      if (this.beforeDelete) {\n        var response = this.beforeDelete(file, this.getDetail(index));\n\n        if (!response) {\n          return;\n        }\n\n        if (response.then) {\n          response.then(function () {\n            _this3.deleteFile(file, index);\n          }).catch(noop);\n          return;\n        }\n      }\n\n      this.deleteFile(file, index);\n    },\n    deleteFile: function deleteFile(file, index) {\n      var fileList = this.fileList.slice(0);\n      fileList.splice(index, 1);\n      this.$emit('input', fileList);\n      this.$emit('delete', file, this.getDetail(index));\n    },\n    resetInput: function resetInput() {\n      /* istanbul ignore else */\n      if (this.$refs.input) {\n        this.$refs.input.value = '';\n      }\n    },\n    onPreviewImage: function onPreviewImage(item) {\n      var _this4 = this;\n\n      if (!this.previewFullImage) {\n        return;\n      }\n\n      var imageFiles = this.fileList.filter(function (item) {\n        return isImageFile(item);\n      });\n      var imageContents = imageFiles.map(function (item) {\n        return item.content || item.url;\n      });\n      this.imagePreview = ImagePreview({\n        images: imageContents,\n        closeOnPopstate: true,\n        startPosition: imageFiles.indexOf(item),\n        onClose: function onClose() {\n          _this4.$emit('close-preview');\n        }\n      });\n    },\n    closeImagePreview: function closeImagePreview() {\n      if (this.imagePreview) {\n        this.imagePreview.close();\n      }\n    },\n    genPreviewItem: function genPreviewItem(item, index) {\n      var _this5 = this;\n\n      var h = this.$createElement;\n      var DeleteIcon = this.deletable && h(Icon, {\n        \"attrs\": {\n          \"name\": \"clear\"\n        },\n        \"class\": bem('preview-delete'),\n        \"on\": {\n          \"click\": function click(event) {\n            event.stopPropagation();\n\n            _this5.onDelete(item, index);\n          }\n        }\n      });\n      var Preview = isImageFile(item) ? h(Image, {\n        \"attrs\": {\n          \"fit\": this.imageFit,\n          \"src\": item.content || item.url,\n          \"width\": this.previewSize,\n          \"height\": this.previewSize,\n          \"radius\": 4\n        },\n        \"class\": bem('preview-image'),\n        \"on\": {\n          \"click\": function click() {\n            _this5.onPreviewImage(item);\n          }\n        }\n      }) : h(\"div\", {\n        \"class\": bem('file'),\n        \"style\": {\n          width: this.previewSizeWithUnit,\n          height: this.previewSizeWithUnit\n        }\n      }, [h(Icon, {\n        \"class\": bem('file-icon'),\n        \"attrs\": {\n          \"name\": \"description\"\n        }\n      }), h(\"div\", {\n        \"class\": [bem('file-name'), 'van-ellipsis']\n      }, [item.file ? item.file.name : item.url])]);\n      return h(\"div\", {\n        \"class\": bem('preview'),\n        \"on\": {\n          \"click\": function click() {\n            _this5.$emit('click-preview', item, _this5.getDetail(index));\n          }\n        }\n      }, [Preview, DeleteIcon]);\n    },\n    genPreviewList: function genPreviewList() {\n      if (this.previewImage) {\n        return this.fileList.map(this.genPreviewItem);\n      }\n    },\n    genUpload: function genUpload() {\n      var h = this.$createElement;\n\n      if (this.fileList.length >= this.maxCount) {\n        return;\n      }\n\n      var slot = this.slots();\n      var Input = h(\"input\", {\n        \"attrs\": _extends({}, this.$attrs, {\n          \"type\": \"file\",\n          \"accept\": this.accept,\n          \"disabled\": this.disabled\n        }),\n        \"ref\": \"input\",\n        \"class\": bem('input'),\n        \"on\": {\n          \"change\": this.onChange\n        }\n      });\n\n      if (slot) {\n        return h(\"div\", {\n          \"class\": bem('input-wrapper')\n        }, [slot, Input]);\n      }\n\n      var style;\n\n      if (this.previewSize) {\n        var size = this.previewSizeWithUnit;\n        style = {\n          width: size,\n          height: size\n        };\n      }\n\n      return h(\"div\", {\n        \"class\": bem('upload'),\n        \"style\": style\n      }, [h(Icon, {\n        \"attrs\": {\n          \"name\": \"plus\"\n        },\n        \"class\": bem('upload-icon')\n      }), this.uploadText && h(\"span\", {\n        \"class\": bem('upload-text')\n      }, [this.uploadText]), Input]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"class\": bem('wrapper')\n    }, [this.genPreviewList(), this.genUpload()])]);\n  }\n});","import '../../style/base.css';\nimport '../../image/index.css';\nimport '../../popup/index.css';\nimport '../../swipe/index.css';\nimport '../../swipe-item/index.css';\nimport '../../image-preview/index.css';\nimport '../index.css';","export var context = {\n  zIndex: 2000,\n  lockCount: 0,\n  stack: [],\n\n  get top() {\n    return this.stack[this.stack.length - 1];\n  }\n\n};","import Vue from 'vue';\n\nfunction getElement(selector) {\n  if (typeof selector === 'string') {\n    return document.querySelector(selector);\n  }\n\n  return selector();\n}\n\nexport function PortalMixin(_ref) {\n  var ref = _ref.ref,\n      afterPortal = _ref.afterPortal;\n  return Vue.extend({\n    props: {\n      getContainer: [String, Function]\n    },\n    watch: {\n      getContainer: 'portal'\n    },\n    mounted: function mounted() {\n      if (this.getContainer) {\n        this.portal();\n      }\n    },\n    methods: {\n      portal: function portal() {\n        var getContainer = this.getContainer;\n        var el = ref ? this.$refs[ref] : this.$el;\n        var container;\n\n        if (getContainer) {\n          container = getElement(getContainer);\n        } else if (this.$parent) {\n          container = this.$parent.$el;\n        }\n\n        if (container && container !== el.parentNode) {\n          container.appendChild(el);\n        }\n\n        if (afterPortal) {\n          afterPortal.call(this);\n        }\n      }\n    }\n  });\n}","import Vue from 'vue';\nimport { on, off } from '../utils/dom/event';\nimport { BindEventMixin } from './bind-event';\nexport var CloseOnPopstateMixin = Vue.extend({\n  mixins: [BindEventMixin(function (bind, isBind) {\n    this.handlePopstate(isBind && this.closeOnPopstate);\n  })],\n  props: {\n    closeOnPopstate: Boolean\n  },\n  data: function data() {\n    return {\n      bindStatus: false\n    };\n  },\n  watch: {\n    closeOnPopstate: function closeOnPopstate(val) {\n      this.handlePopstate(val);\n    }\n  },\n  methods: {\n    handlePopstate: function handlePopstate(bind) {\n      /* istanbul ignore if */\n      if (this.$isServer) {\n        return;\n      }\n\n      if (this.bindStatus !== bind) {\n        this.bindStatus = bind;\n        var action = bind ? on : off;\n        action(window, 'popstate', this.close);\n      }\n    }\n  }\n});","import _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createNamespace, isDef } from '../utils';\nimport { inherit } from '../utils/functional';\nimport { preventDefault } from '../utils/dom/event'; // Types\n\nvar _createNamespace = createNamespace('overlay'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction preventTouchMove(event) {\n  preventDefault(event, true);\n}\n\nfunction Overlay(h, props, slots, ctx) {\n  var style = _extends({\n    zIndex: props.zIndex\n  }, props.customStyle);\n\n  if (isDef(props.duration)) {\n    style.animationDuration = props.duration + \"s\";\n  }\n\n  return h(\"transition\", {\n    \"attrs\": {\n      \"name\": \"van-fade\"\n    }\n  }, [h(\"div\", _mergeJSXProps([{\n    \"directives\": [{\n      name: \"show\",\n      value: props.show\n    }],\n    \"style\": style,\n    \"class\": [bem(), props.className],\n    \"on\": {\n      \"touchmove\": preventTouchMove\n    }\n  }, inherit(ctx, true)]), [slots.default && slots.default()])]);\n}\n\nOverlay.props = {\n  show: Boolean,\n  duration: [Number, String],\n  className: null,\n  customStyle: Object,\n  zIndex: {\n    type: [Number, String],\n    default: 1\n  }\n};\nexport default createComponent(Overlay);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Overlay from '../../overlay';\nimport { context } from './context';\nimport { mount } from '../../utils/functional';\nvar defaultConfig = {\n  className: '',\n  customStyle: {}\n};\nvar overlay; // close popup when click overlay && closeOnClickOverlay is true\n\nfunction onClickOverlay() {\n  if (context.top) {\n    var vm = context.top.vm;\n    vm.$emit('click-overlay');\n\n    if (vm.closeOnClickOverlay) {\n      if (vm.onClickOverlay) {\n        vm.onClickOverlay();\n      } else {\n        vm.close();\n      }\n    }\n  }\n}\n\nexport function updateOverlay() {\n  if (!overlay) {\n    overlay = mount(Overlay, {\n      on: {\n        click: onClickOverlay\n      }\n    });\n  }\n\n  if (context.top) {\n    var _context$top = context.top,\n        vm = _context$top.vm,\n        config = _context$top.config;\n    var el = vm.$el;\n\n    if (el && el.parentNode) {\n      el.parentNode.insertBefore(overlay.$el, el);\n    } else {\n      document.body.appendChild(overlay.$el);\n    }\n\n    _extends(overlay, defaultConfig, config, {\n      show: true\n    });\n  } else {\n    overlay.show = false;\n  }\n}\nexport function openOverlay(vm, config) {\n  if (!context.stack.some(function (item) {\n    return item.vm === vm;\n  })) {\n    context.stack.push({\n      vm: vm,\n      config: config\n    });\n    updateOverlay();\n  }\n}\nexport function closeOverlay(vm) {\n  var stack = context.stack;\n\n  if (stack.length) {\n    if (context.top.vm === vm) {\n      stack.pop();\n      updateOverlay();\n    } else {\n      context.stack = stack.filter(function (item) {\n        return item.vm !== vm;\n      });\n    }\n  }\n}","import { context } from './context';\nimport { TouchMixin } from '../touch';\nimport { PortalMixin } from '../portal';\nimport { CloseOnPopstateMixin } from '../close-on-popstate';\nimport { on, off, preventDefault } from '../../utils/dom/event';\nimport { openOverlay, closeOverlay, updateOverlay } from './overlay';\nimport { getScrollEventTarget } from '../../utils/dom/scroll';\nexport var PopupMixin = {\n  mixins: [TouchMixin, CloseOnPopstateMixin, PortalMixin({\n    afterPortal: function afterPortal() {\n      if (this.overlay) {\n        updateOverlay();\n      }\n    }\n  })],\n  props: {\n    // whether to show popup\n    value: Boolean,\n    // whether to show overlay\n    overlay: Boolean,\n    // overlay custom style\n    overlayStyle: Object,\n    // overlay custom class name\n    overlayClass: String,\n    // whether to close popup when click overlay\n    closeOnClickOverlay: Boolean,\n    // z-index\n    zIndex: [Number, String],\n    // prevent body scroll\n    lockScroll: {\n      type: Boolean,\n      default: true\n    },\n    // whether to lazy render\n    lazyRender: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      inited: this.value\n    };\n  },\n  computed: {\n    shouldRender: function shouldRender() {\n      return this.inited || !this.lazyRender;\n    }\n  },\n  watch: {\n    value: function value(val) {\n      var type = val ? 'open' : 'close';\n      this.inited = this.inited || this.value;\n      this[type]();\n      this.$emit(type);\n    },\n    overlay: 'renderOverlay'\n  },\n  mounted: function mounted() {\n    if (this.value) {\n      this.open();\n    }\n  },\n\n  /* istanbul ignore next */\n  activated: function activated() {\n    if (this.value) {\n      this.open();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.close();\n\n    if (this.getContainer && this.$parent && this.$parent.$el) {\n      this.$parent.$el.appendChild(this.$el);\n    }\n  },\n\n  /* istanbul ignore next */\n  deactivated: function deactivated() {\n    this.close();\n  },\n  methods: {\n    open: function open() {\n      /* istanbul ignore next */\n      if (this.$isServer || this.opened) {\n        return;\n      } // cover default zIndex\n\n\n      if (this.zIndex !== undefined) {\n        context.zIndex = this.zIndex;\n      }\n\n      this.opened = true;\n      this.renderOverlay();\n\n      if (this.lockScroll) {\n        on(document, 'touchstart', this.touchStart);\n        on(document, 'touchmove', this.onTouchMove);\n\n        if (!context.lockCount) {\n          document.body.classList.add('van-overflow-hidden');\n        }\n\n        context.lockCount++;\n      }\n    },\n    close: function close() {\n      if (!this.opened) {\n        return;\n      }\n\n      if (this.lockScroll) {\n        context.lockCount--;\n        off(document, 'touchstart', this.touchStart);\n        off(document, 'touchmove', this.onTouchMove);\n\n        if (!context.lockCount) {\n          document.body.classList.remove('van-overflow-hidden');\n        }\n      }\n\n      this.opened = false;\n      closeOverlay(this);\n      this.$emit('input', false);\n    },\n    onTouchMove: function onTouchMove(event) {\n      this.touchMove(event);\n      var direction = this.deltaY > 0 ? '10' : '01';\n      var el = getScrollEventTarget(event.target, this.$el);\n      var scrollHeight = el.scrollHeight,\n          offsetHeight = el.offsetHeight,\n          scrollTop = el.scrollTop;\n      var status = '11';\n      /* istanbul ignore next */\n\n      if (scrollTop === 0) {\n        status = offsetHeight >= scrollHeight ? '00' : '01';\n      } else if (scrollTop + offsetHeight >= scrollHeight) {\n        status = '10';\n      }\n      /* istanbul ignore next */\n\n\n      if (status !== '11' && this.direction === 'vertical' && !(parseInt(status, 2) & parseInt(direction, 2))) {\n        preventDefault(event, true);\n      }\n    },\n    renderOverlay: function renderOverlay() {\n      var _this = this;\n\n      if (this.$isServer || !this.value) {\n        return;\n      }\n\n      this.$nextTick(function () {\n        _this.updateZIndex(_this.overlay ? 1 : 0);\n\n        if (_this.overlay) {\n          openOverlay(_this, {\n            zIndex: context.zIndex++,\n            duration: _this.duration,\n            className: _this.overlayClass,\n            customStyle: _this.overlayStyle\n          });\n        } else {\n          closeOverlay(_this);\n        }\n      });\n    },\n    updateZIndex: function updateZIndex(value) {\n      if (value === void 0) {\n        value = 0;\n      }\n\n      this.$el.style.zIndex = ++context.zIndex + value;\n    }\n  }\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createNamespace } from '../utils';\n\nvar _createNamespace = createNamespace('swipe-item'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  data: function data() {\n    return {\n      offset: 0\n    };\n  },\n  beforeCreate: function beforeCreate() {\n    this.$parent.swipes.push(this);\n  },\n  destroyed: function destroyed() {\n    this.$parent.swipes.splice(this.$parent.swipes.indexOf(this), 1);\n  },\n  render: function render() {\n    var h = arguments[0];\n    var _this$$parent = this.$parent,\n        vertical = _this$$parent.vertical,\n        computedWidth = _this$$parent.computedWidth,\n        computedHeight = _this$$parent.computedHeight;\n    var style = {\n      width: computedWidth + 'px',\n      height: vertical ? computedHeight + 'px' : '100%',\n      transform: \"translate\" + (vertical ? 'Y' : 'X') + \"(\" + this.offset + \"px)\"\n    };\n    return h(\"div\", {\n      \"class\": bem(),\n      \"style\": style,\n      \"on\": _extends({}, this.$listeners)\n    }, [this.slots()]);\n  }\n});","// get nearest scroll element\n// http://w3help.org/zh-cn/causes/SD9013\n// http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\nvar overflowScrollReg = /scroll|auto/i;\nexport function getScrollEventTarget(element, rootParent) {\n  if (rootParent === void 0) {\n    rootParent = window;\n  }\n\n  var node = element;\n\n  while (node && node.tagName !== 'HTML' && node.nodeType === 1 && node !== rootParent) {\n    var _window$getComputedSt = window.getComputedStyle(node),\n        overflowY = _window$getComputedSt.overflowY;\n\n    if (overflowScrollReg.test(overflowY)) {\n      if (node.tagName !== 'BODY') {\n        return node;\n      } // see: https://github.com/youzan/vant/issues/3823\n\n\n      var _window$getComputedSt2 = window.getComputedStyle(node.parentNode),\n          htmlOverflowY = _window$getComputedSt2.overflowY;\n\n      if (overflowScrollReg.test(htmlOverflowY)) {\n        return node;\n      }\n    }\n\n    node = node.parentNode;\n  }\n\n  return rootParent;\n}\nexport function getScrollTop(element) {\n  return 'scrollTop' in element ? element.scrollTop : element.pageYOffset;\n}\nexport function setScrollTop(element, value) {\n  'scrollTop' in element ? element.scrollTop = value : element.scrollTo(element.scrollX, value);\n}\nexport function getRootScrollTop() {\n  return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n}\nexport function setRootScrollTop(value) {\n  setScrollTop(window, value);\n  setScrollTop(document.body, value);\n} // get distance from element top to page top\n\nexport function getElementTop(element) {\n  return (element === window ? 0 : element.getBoundingClientRect().top) + getRootScrollTop();\n}\nexport function getVisibleHeight(element) {\n  return element === window ? element.innerHeight : element.getBoundingClientRect().height;\n}","import '../../style/base.css';\nimport '../../image/index.css';\nimport '../index.css';","/**\n * requestAnimationFrame polyfill\n */\nimport { isServer } from '..';\nvar prev = Date.now();\n/* istanbul ignore next */\n\nfunction fallback(fn) {\n  var curr = Date.now();\n  var ms = Math.max(0, 16 - (curr - prev));\n  var id = setTimeout(fn, ms);\n  prev = curr + ms;\n  return id;\n}\n/* istanbul ignore next */\n\n\nvar root = isServer ? global : window;\n/* istanbul ignore next */\n\nvar iRaf = root.requestAnimationFrame || fallback;\n/* istanbul ignore next */\n\nvar iCancel = root.cancelAnimationFrame || root.clearTimeout;\nexport function raf(fn) {\n  return iRaf.call(root, fn);\n} // double raf for animation\n\nexport function doubleRaf(fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\nexport function cancelRaf(id) {\n  iCancel.call(root, id);\n}","/**\n * Bind event when mounted or activated\n */\nimport { on, off } from '../utils/dom/event';\nexport function BindEventMixin(handler) {\n  function bind() {\n    if (!this.binded) {\n      handler.call(this, on, true);\n      this.binded = true;\n    }\n  }\n\n  function unbind() {\n    if (this.binded) {\n      handler.call(this, off, false);\n      this.binded = false;\n    }\n  }\n\n  return {\n    mounted: bind,\n    activated: bind,\n    deactivated: unbind,\n    beforeDestroy: unbind\n  };\n}","import { createNamespace } from '../utils';\nimport { preventDefault } from '../utils/dom/event';\nimport { TouchMixin } from '../mixins/touch';\nimport { BindEventMixin } from '../mixins/bind-event';\nimport { doubleRaf } from '../utils/dom/raf';\nimport { range } from '../utils/format/number';\n\nvar _createNamespace = createNamespace('swipe'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [TouchMixin, BindEventMixin(function (bind, isBind) {\n    bind(window, 'resize', this.onResize, true);\n\n    if (isBind) {\n      this.initialize();\n    } else {\n      this.clear();\n    }\n  })],\n  props: {\n    width: Number,\n    height: Number,\n    autoplay: Number,\n    vertical: Boolean,\n    indicatorColor: String,\n    loop: {\n      type: Boolean,\n      default: true\n    },\n    duration: {\n      type: Number,\n      default: 500\n    },\n    touchable: {\n      type: Boolean,\n      default: true\n    },\n    initialSwipe: {\n      type: Number,\n      default: 0\n    },\n    showIndicators: {\n      type: Boolean,\n      default: true\n    },\n    stopPropagation: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      computedWidth: 0,\n      computedHeight: 0,\n      offset: 0,\n      active: 0,\n      deltaX: 0,\n      deltaY: 0,\n      swipes: [],\n      swiping: false\n    };\n  },\n  watch: {\n    swipes: function swipes() {\n      this.initialize();\n    },\n    initialSwipe: function initialSwipe() {\n      this.initialize();\n    },\n    autoplay: function autoplay(_autoplay) {\n      if (!_autoplay) {\n        this.clear();\n      } else {\n        this.autoPlay();\n      }\n    }\n  },\n  computed: {\n    count: function count() {\n      return this.swipes.length;\n    },\n    delta: function delta() {\n      return this.vertical ? this.deltaY : this.deltaX;\n    },\n    size: function size() {\n      return this[this.vertical ? 'computedHeight' : 'computedWidth'];\n    },\n    trackSize: function trackSize() {\n      return this.count * this.size;\n    },\n    activeIndicator: function activeIndicator() {\n      return (this.active + this.count) % this.count;\n    },\n    isCorrectDirection: function isCorrectDirection() {\n      var expect = this.vertical ? 'vertical' : 'horizontal';\n      return this.direction === expect;\n    },\n    trackStyle: function trackStyle() {\n      var _ref;\n\n      var mainAxis = this.vertical ? 'height' : 'width';\n      var crossAxis = this.vertical ? 'width' : 'height';\n      return _ref = {}, _ref[mainAxis] = this.trackSize + \"px\", _ref[crossAxis] = this[crossAxis] ? this[crossAxis] + \"px\" : '', _ref.transitionDuration = (this.swiping ? 0 : this.duration) + \"ms\", _ref.transform = \"translate\" + (this.vertical ? 'Y' : 'X') + \"(\" + this.offset + \"px)\", _ref;\n    },\n    indicatorStyle: function indicatorStyle() {\n      return {\n        backgroundColor: this.indicatorColor\n      };\n    },\n    minOffset: function minOffset() {\n      var rect = this.$el.getBoundingClientRect();\n      return (this.vertical ? rect.height : rect.width) - this.size * this.count;\n    }\n  },\n  methods: {\n    // initialize swipe position\n    initialize: function initialize(active) {\n      if (active === void 0) {\n        active = this.initialSwipe;\n      }\n\n      clearTimeout(this.timer);\n\n      if (this.$el) {\n        var rect = this.$el.getBoundingClientRect();\n        this.computedWidth = this.width || rect.width;\n        this.computedHeight = this.height || rect.height;\n      }\n\n      this.swiping = true;\n      this.active = active;\n      this.offset = this.count > 1 ? -this.size * this.active : 0;\n      this.swipes.forEach(function (swipe) {\n        swipe.offset = 0;\n      });\n      this.autoPlay();\n    },\n    onResize: function onResize() {\n      this.initialize(this.activeIndicator);\n    },\n    onTouchStart: function onTouchStart(event) {\n      if (!this.touchable) return;\n      this.clear();\n      this.swiping = true;\n      this.touchStart(event);\n      this.correctPosition();\n    },\n    onTouchMove: function onTouchMove(event) {\n      if (!this.touchable || !this.swiping) return;\n      this.touchMove(event);\n\n      if (this.isCorrectDirection) {\n        preventDefault(event, this.stopPropagation);\n        this.move({\n          offset: this.delta\n        });\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      if (!this.touchable || !this.swiping) return;\n\n      if (this.delta && this.isCorrectDirection) {\n        var offset = this.vertical ? this.offsetY : this.offsetX;\n        this.move({\n          pace: offset > 0 ? this.delta > 0 ? -1 : 1 : 0,\n          emitChange: true\n        });\n      }\n\n      this.swiping = false;\n      this.autoPlay();\n    },\n    getTargetActive: function getTargetActive(pace) {\n      var active = this.active,\n          count = this.count;\n\n      if (pace) {\n        if (this.loop) {\n          return range(active + pace, -1, count);\n        }\n\n        return range(active + pace, 0, count - 1);\n      }\n\n      return active;\n    },\n    getTargetOffset: function getTargetOffset(targetActive, offset) {\n      var currentPosition = targetActive * this.size;\n\n      if (!this.loop) {\n        currentPosition = Math.min(currentPosition, -this.minOffset);\n      }\n\n      var targetOffset = Math.round(offset - currentPosition);\n\n      if (!this.loop) {\n        targetOffset = range(targetOffset, this.minOffset, 0);\n      }\n\n      return targetOffset;\n    },\n    move: function move(_ref2) {\n      var _ref2$pace = _ref2.pace,\n          pace = _ref2$pace === void 0 ? 0 : _ref2$pace,\n          _ref2$offset = _ref2.offset,\n          offset = _ref2$offset === void 0 ? 0 : _ref2$offset,\n          emitChange = _ref2.emitChange;\n      var loop = this.loop,\n          count = this.count,\n          active = this.active,\n          swipes = this.swipes,\n          trackSize = this.trackSize,\n          minOffset = this.minOffset;\n\n      if (count <= 1) {\n        return;\n      }\n\n      var targetActive = this.getTargetActive(pace);\n      var targetOffset = this.getTargetOffset(targetActive, offset); // auto move first and last swipe in loop mode\n\n      if (loop) {\n        if (swipes[0]) {\n          var outRightBound = targetOffset < minOffset;\n          swipes[0].offset = outRightBound ? trackSize : 0;\n        }\n\n        if (swipes[count - 1]) {\n          var outLeftBound = targetOffset > 0;\n          swipes[count - 1].offset = outLeftBound ? -trackSize : 0;\n        }\n      }\n\n      this.active = targetActive;\n      this.offset = targetOffset;\n\n      if (emitChange && targetActive !== active) {\n        this.$emit('change', this.activeIndicator);\n      }\n    },\n    swipeTo: function swipeTo(index, options) {\n      var _this = this;\n\n      if (options === void 0) {\n        options = {};\n      }\n\n      this.swiping = true;\n      this.resetTouchStatus();\n      this.correctPosition();\n      doubleRaf(function () {\n        var targetIndex;\n\n        if (_this.loop && index === _this.count) {\n          targetIndex = _this.active === 0 ? 0 : index;\n        } else {\n          targetIndex = index % _this.count;\n        }\n\n        _this.move({\n          pace: targetIndex - _this.active,\n          emitChange: true\n        });\n\n        if (options.immediate) {\n          doubleRaf(function () {\n            _this.swiping = false;\n          });\n        } else {\n          _this.swiping = false;\n        }\n      });\n    },\n    correctPosition: function correctPosition() {\n      if (this.active <= -1) {\n        this.move({\n          pace: this.count\n        });\n      }\n\n      if (this.active >= this.count) {\n        this.move({\n          pace: -this.count\n        });\n      }\n    },\n    clear: function clear() {\n      clearTimeout(this.timer);\n    },\n    autoPlay: function autoPlay() {\n      var _this2 = this;\n\n      var autoplay = this.autoplay;\n\n      if (autoplay && this.count > 1) {\n        this.clear();\n        this.timer = setTimeout(function () {\n          _this2.swiping = true;\n\n          _this2.resetTouchStatus();\n\n          _this2.correctPosition();\n\n          doubleRaf(function () {\n            _this2.swiping = false;\n\n            _this2.move({\n              pace: 1,\n              emitChange: true\n            });\n\n            _this2.autoPlay();\n          });\n        }, autoplay);\n      }\n    },\n    genIndicator: function genIndicator() {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var count = this.count,\n          activeIndicator = this.activeIndicator;\n      var slot = this.slots('indicator');\n\n      if (slot) {\n        return slot;\n      }\n\n      if (this.showIndicators && count > 1) {\n        return h(\"div\", {\n          \"class\": bem('indicators', {\n            vertical: this.vertical\n          })\n        }, [Array.apply(void 0, Array(count)).map(function (empty, index) {\n          return h(\"i\", {\n            \"class\": bem('indicator', {\n              active: index === activeIndicator\n            }),\n            \"style\": index === activeIndicator ? _this3.indicatorStyle : null\n          });\n        })]);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"ref\": \"track\",\n      \"style\": this.trackStyle,\n      \"class\": bem('track'),\n      \"on\": {\n        \"touchstart\": this.onTouchStart,\n        \"touchmove\": this.onTouchMove,\n        \"touchend\": this.onTouchEnd,\n        \"touchcancel\": this.onTouchEnd\n      }\n    }, [this.slots()]), this.genIndicator()]);\n  }\n});"],"sourceRoot":""}